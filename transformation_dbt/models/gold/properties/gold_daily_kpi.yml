version: 2

models:
  - name: gold_daily_kpi
    config:
      contract: {enforced: true}
    columns:
      - name: funded_at
        data_type: date
        constraints:
          - type: not_null
          - type: unique
        data_tests:
          - unique
          - not_null

      - name: funded_count
        data_type: bigint
        constraints:
          - type: check
            expression: "funded_count >= 0"
        data_tests:
          - not_null

      - name: avg_apr
        data_type: double

      - name: principal_weighted_margin
        data_type: double

      - name: default_rate_D90
        data_type: double
        constraints:
          - type: check
            expression: "default_rate_D90 >= 0 AND default_rate_D90 <= 100"
        data_tests:
          - not_null